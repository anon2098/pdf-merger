# PDF Merger & Stamper

[![Node.js](https://img.shields.io/badge/Node.js-18%2B-green.svg)](https://nodejs.org/)
[![License: GPL v3](https://img.shields.io/badge/License-GPLv3-blue.svg)](https://www.gnu.org/licenses/gpl-3.0)
[![npm version](https://img.shields.io/npm/v/pdf-merger-stamper.svg)](https://www.npmjs.com/package/pdf-merger-stamper)

Merge PDFs chronologically, stamp each with exhibit numbers (ACK-001, ACK-002, etc.), and automatically generate an index table. Perfect for legal documents, affidavits, and evidence bundles.

## ‚ú® Features

- **Chronological Merging** - Sorts PDFs by filename (supports `yyyy_mm_dd` format)
- **Exhibit Stamping** - Stamps first page of each PDF with ACK-001, ACK-002, etc.
- **Index Generation** - Creates a table with Exhibit, Document, Date, and Page columns
- **Multiple Formats** - Outputs merged PDF, index PDF, and editable ODT file
- **Smart Parsing** - Extracts sender, receiver, and date from filenames

## üìã Requirements

- Node.js 18 or higher
- npm

## üöÄ Installation

### Option 1: Install globally from npm

```bash
npm install -g pdf-merger-stamper
```

### Option 2: Install globally from GitHub

```bash
npm install -g github:anon2098/pdf-merger
```

### Option 3: Clone and install locally

```bash
git clone https://github.com/anon2098/pdf-merger.git
cd pdf-merger
npm install
npm link  # Makes 'pdf-merger' command available globally
```

## üìñ Usage

### Command Line

```bash
# Merge all PDFs in a directory
pdf-merger /path/to/pdfs/

# Specify custom output filename
pdf-merger /path/to/pdfs/ "my-affidavit.pdf"
```

### Using Node directly

```bash
node merge-stamp.js /path/to/pdfs/
node merge-stamp.js /path/to/pdfs/ "output.pdf"
```

## üìÑ Output Files

Three files are generated in the input directory:

| File | Description |
|------|-------------|
| `ACK-001 - ACK-XXX.pdf` | Merged PDF with all documents stamped |
| `ACK-001 - ACK-XXX Index.pdf` | Index table as PDF |
| `ACK-001 - ACK-XXX Index.odt` | Editable index in OpenDocument format |

With custom output name:
```bash
pdf-merger /path/to/pdfs/ "evidence.pdf"
# Creates: evidence.pdf, evidence Index.pdf, evidence Index.odt
```

## üìä Index Table Format

The generated index includes:

| Column | Description |
|--------|-------------|
| **Exhibit** | ACK-001, ACK-002, etc. |
| **Document** | "Email from [sender] to [receiver]" |
| **Date** | Formatted as dd.mm.yyyy |
| **Page(s)** | Page range (e.g., 1-4, 5, 6-10) |

## üìÅ Expected Filename Format

For best results, name your PDFs using this format:
```
yyyy_mm_dd_hh_mm_SenderName_to_ReceiverName.pdf
```

Example:
```
2024_01_15_09_30_John_Smith_to_Jane_Doe.pdf
```

This format is automatically generated by [eml-to-pdf-render](https://github.com/anon2098/eml-to-pdf-render).

## üîß How It Works

1. **Scan Directory** - Finds all PDF files in the input directory
2. **Sort Chronologically** - Orders files by filename (date-based sorting)
3. **Stamp Pages** - Adds exhibit number to the first page of each PDF
4. **Merge Documents** - Combines all PDFs into a single document
5. **Generate Index** - Creates index table with document metadata
6. **Export Formats** - Saves merged PDF, index PDF, and editable ODT

## üì¶ Dependencies

- [pdf-lib](https://pdf-lib.js.org/) - PDF creation and manipulation
- [jszip](https://stuk.github.io/jszip/) - ODT file generation

## ü§ù Contributing

Contributions are welcome! Please feel free to submit a Pull Request.

## üìÑ License

This project is licensed under the GNU General Public License v3.0 - see the [LICENSE](LICENSE) file for details.

## üîó Related Projects

- [eml-to-pdf-render](https://github.com/anon2098/eml-to-pdf-render) - Convert EML emails to PDF (generates compatible filenames)
